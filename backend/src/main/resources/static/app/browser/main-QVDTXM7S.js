import{a as H}from"./chunk-HL65E55A.js";import{a as $e}from"./chunk-SFP4LTJZ.js";import{a as le,b as I,c as d,d as E,e as F,f as Ve,g as N,i as T,j as D,k as je,l as Ge,m as Be,o as z,p as L,q,r as Ye,s as U}from"./chunk-7SKPC2TH.js";import{$ as Z,A as xe,Aa as He,B as l,Ba as v,Ca as y,D as K,E as _,I as w,K as b,L as u,M as re,N as e,O as t,P as c,Q as Ee,R as C,S as X,U as o,V as $,W as g,X as we,Y as ke,Z as Re,aa as Ae,ba as Ie,da as Fe,fa as Ne,g as Me,j as ye,k as R,la as ie,ma as G,o as ne,pa as Te,qa as h,r as s,ra as De,sa as ae,t as Ce,ta as ze,u as ve,ua as Le,va as A,wa as qe,x as Se,xa as M,ya as O,z as oe,za as Ue}from"./chunk-PPRWOMJK.js";var We=()=>({exact:!1}),x=class a{elementRef=s(Se);isMenuOpen=!1;isScrolled=!1;ticking=!1;ngOnInit(){this.checkScrollPosition()}ngAfterViewInit(){this.forceReflow(),this.initStickyFallback()}ngOnDestroy(){}onWindowScroll(){this.requestTick()}onWindowResize(){this.forceReflow()}requestTick(){this.ticking||(requestAnimationFrame(()=>{this.checkScrollPosition(),this.ticking=!1}),this.ticking=!0)}checkScrollPosition(){let i=(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0)>30;i!==this.isScrolled&&(this.isScrolled=i,this.updateNavbarClass())}updateNavbarClass(){let r=this.elementRef.nativeElement.querySelector(".navbar");r&&(this.isScrolled?r.classList.add("navbar--scrolled"):r.classList.remove("navbar--scrolled"))}forceReflow(){let r=this.elementRef.nativeElement.querySelector(".navbar");r&&(r.style.position="relative",r.offsetHeight,r.style.position="")}initStickyFallback(){let r=this.elementRef.nativeElement.querySelector(".navbar");if(r){let i=r.getBoundingClientRect();getComputedStyle(r).position==="sticky"||(console.warn("Sticky not supported, using fixed fallback"),this.implementFixedFallback())}}implementFixedFallback(){let r=this.elementRef.nativeElement.querySelector(".navbar");if(r){let i=!1,n=r.offsetHeight,m=()=>{let p=window.pageYOffset||document.documentElement.scrollTop;p>n&&!i?(r.style.position="fixed",r.style.top="0",r.style.width="100%",r.style.zIndex="1000",i=!0,document.body.style.paddingTop=n+"px"):p<=n&&i&&(r.style.position="",r.style.top="",r.style.width="",r.style.zIndex="",i=!1,document.body.style.paddingTop="")};window.addEventListener("scroll",m)}}navigateToRoot(r){r.preventDefault(),window.location.href="/"}isRootPath(){return window.location.pathname==="/"}navigateExternal(r,i){r.preventDefault(),window.location.href=i}toggleMenu(){this.isMenuOpen=!this.isMenuOpen}static \u0275fac=function(i){return new(i||a)};static \u0275cmp=_({type:a,selectors:[["app-navbar"]],hostBindings:function(i,n){i&1&&C("scroll",function(p){return n.onWindowScroll(p)},!1,xe)("resize",function(p){return n.onWindowResize(p)},!1,xe)},decls:33,vars:11,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-white","sticky-top","shadow-sm"],[1,"container"],["href","/","aria-label","Ir a inicio",1,"navbar-brand","d-flex","align-items-center",3,"click"],["src","/images/logo_test.svg","width","160","height","60","alt","Cosecha en Cope",1,"navbar-logo"],["type","button","aria-controls","navbarNav","aria-label","Toggle navigation",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],["aria-label","Navegaci\xF3n principal",1,"navbar-nav","me-auto"],["href","/",1,"nav-link","px-3","py-2","rounded-2",3,"click"],[1,"fas","fa-home","me-2"],["routerLink","/articulos","routerLinkActive","active",1,"nav-link","px-3","py-2","rounded-2",3,"routerLinkActiveOptions"],[1,"fas","fa-shopping-basket","me-2"],["routerLink","/categorias","routerLinkActive","active",1,"nav-link","px-3","py-2","rounded-2",3,"routerLinkActiveOptions"],[1,"fas","fa-tags","me-2"],["href","/nosotros",1,"nav-link","px-3","py-2","rounded-2",3,"click"],[1,"fas","fa-users","me-2"],["href","/contacto",1,"nav-link","px-3","py-2","rounded-2",3,"click"],[1,"fas","fa-envelope","me-2"],[1,"navbar-nav"],["routerLink","/auth",1,"btn","btn-primary","btn-sm","px-4","py-2","rounded-pill","fw-semibold","d-flex","align-items-center"],[1,"fas","fa-user-plus","me-2"]],template:function(i,n){i&1&&(e(0,"header",0)(1,"div",1)(2,"a",2),C("click",function(p){return n.navigateToRoot(p)}),c(3,"img",3),t(),e(4,"button",4),C("click",function(){return n.toggleMenu()}),c(5,"span",5),t(),e(6,"div",6)(7,"nav",7)(8,"a",8),C("click",function(p){return n.navigateToRoot(p)}),c(9,"i",9),e(10,"span"),o(11,"Inicio"),t()(),e(12,"a",10),c(13,"i",11),e(14,"span"),o(15,"Productos"),t()(),e(16,"a",12),c(17,"i",13),e(18,"span"),o(19,"Categor\xEDas"),t()(),e(20,"a",14),C("click",function(p){return n.navigateExternal(p,"/nosotros")}),c(21,"i",15),e(22,"span"),o(23,"\xBFQui\xE9nes somos?"),t()(),e(24,"a",16),C("click",function(p){return n.navigateExternal(p,"/contacto")}),c(25,"i",17),e(26,"span"),o(27,"Contacto"),t()()(),e(28,"div",18)(29,"a",19),c(30,"i",20),e(31,"span"),o(32,"Acceder"),t()()()()()()),i&2&&(re("navbar--scrolled",n.isScrolled),l(4),b("aria-expanded",n.isMenuOpen),l(2),re("show",n.isMenuOpen),l(2),re("active",n.isRootPath()),l(4),u("routerLinkActiveOptions",Z(9,We)),l(4),u("routerLinkActiveOptions",Z(10,We)))},dependencies:[h,v,O,Ue],styles:['.navbar[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1000;background:#fffffff2;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-bottom:1px solid rgba(0,0,0,.08);box-shadow:0 4px 20px #00000014;transition:all .3s ease;min-height:80px}.navbar[_ngcontent-%COMP%]:hover{background:#fffffffa;box-shadow:0 6px 25px #0000001f}.navbar.navbar--scrolled[_ngcontent-%COMP%]{background:#fffffffa;box-shadow:0 8px 32px #00000026;backdrop-filter:blur(25px);-webkit-backdrop-filter:blur(25px)}.container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:11rem;min-height:80px}.navbar-brand[_ngcontent-%COMP%]{transition:transform .3s ease}.navbar-brand[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.navbar-logo[_ngcontent-%COMP%]{transition:filter .3s ease}.navbar-logo[_ngcontent-%COMP%]:hover{filter:brightness(1.1)}.navbar-nav[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}@media (max-width: 575.98px){.navbar-nav[_ngcontent-%COMP%]{gap:.25rem}}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;border-radius:12px;color:#495057;text-decoration:none;font-weight:500;font-size:.95rem;transition:all .3s ease;position:relative}.nav-link[_ngcontent-%COMP%]:hover{background:#28a7451a;color:#2c5c2d;transform:translateY(-1px)}.nav-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{opacity:1;color:#28a745;transform:scale(1.1)}.nav-link.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a74526,#20c99726);color:#2c5c2d;font-weight:600}.nav-link.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#28a745;opacity:1}.nav-link.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:50%;transform:translate(-50%);width:20px;height:3px;background:linear-gradient(135deg,#28a745,#20c997);border-radius:2px}.btn-primary[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.6rem;padding:.8rem 1.5rem;background:linear-gradient(135deg,#28a745,#20c997);color:#fff!important;font-weight:600;font-size:.95rem;border-radius:25px;text-decoration:none;transition:all .3s ease;box-shadow:0 4px 15px #28a7454d;border:none}.btn-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem;transition:transform .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#20c997,#28a745);transform:translateY(-2px);box-shadow:0 6px 20px #28a74566}.btn-primary[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.1)}.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(-1px)}@media (max-width: 991.98px){.container[_ngcontent-%COMP%]{min-height:60px}.navbar-collapse.show[_ngcontent-%COMP%]{display:block}.navbar-nav[_ngcontent-%COMP%]{flex-direction:column;width:100%;gap:.25rem;margin-top:1rem}.nav-link[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem}.btn-primary[_ngcontent-%COMP%]{margin-top:1rem;width:100%;justify-content:center}}']})};var P=class a{static \u0275fac=function(i){return new(i||a)};static \u0275cmp=_({type:a,selectors:[["app-footer"]],decls:87,vars:0,consts:[[1,"footer","bg-dark","text-light","py-5","mt-5"],[1,"container"],[1,"row"],[1,"col-lg-4","col-md-6","mb-4"],[1,"footer-about"],[1,"footer-logo","mb-3"],["src","/images/logo.png","width","150","height","50","alt","Cosecha en Cope Logo",1,"img-fluid"],[1,"footer-block","mb-3"],[1,"fw-bold","text-white"],[1,"text-light","mb-0"],[1,"footer-links"],["href","tel:+5491112345678",1,"text-light","text-decoration-none","d-block","mb-1"],[1,"fas","fa-phone","me-2"],["href","mailto:contacto@cosechaencope.com",1,"text-light","text-decoration-none","d-block"],[1,"fas","fa-envelope","me-2"],[1,"footer-social"],[1,"fw-bold","text-white","mb-3"],[1,"d-flex","gap-3"],["aria-label","Facebook","href","https://facebook.com/cosechaencope","target","_blank","rel","noopener noreferrer",1,"text-light","fs-5","hover-primary"],[1,"fab","fa-facebook"],["aria-label","Instagram","href","https://instagram.com/cosechaencope","target","_blank","rel","noopener noreferrer",1,"text-light","fs-5","hover-primary"],[1,"fab","fa-instagram"],["aria-label","LinkedIn","href","https://linkedin.com/company/cosechaencope","target","_blank","rel","noopener noreferrer",1,"text-light","fs-5","hover-primary"],[1,"fab","fa-linkedin"],["aria-label","X (Twitter)","href","https://x.com/cosechaencope","target","_blank","rel","noopener noreferrer",1,"text-light","fs-5","hover-primary"],[1,"fab","fa-x-twitter"],[1,"col-lg-2","col-md-3","col-sm-6","mb-4"],[1,"footer-nav"],["href","/",1,"text-light","text-decoration-none","d-block","mb-2","hover-primary"],["href","/app/articulos",1,"text-light","text-decoration-none","d-block","mb-2","hover-primary"],["href","/nosotros",1,"text-light","text-decoration-none","d-block","mb-2","hover-primary"],["href","/categorias",1,"text-light","text-decoration-none","d-block","mb-2","hover-primary"],["href","/contacto",1,"text-light","text-decoration-none","d-block","mb-2","hover-primary"],["href","/productos/frutas",1,"text-light","text-decoration-none","d-block","mb-2","hover-primary"],["href","/productos/verduras",1,"text-light","text-decoration-none","d-block","mb-2","hover-primary"],["href","/productos/hortalizas",1,"text-light","text-decoration-none","d-block","mb-2","hover-primary"],["href","/productos/cereales",1,"text-light","text-decoration-none","d-block","mb-2","hover-primary"],["href","/app/auth",1,"text-light","text-decoration-none","d-block","mb-2","hover-primary"],[1,"text-light","mb-3"],[1,"newsletter-form","mb-3"],[1,"input-group"],["type","email","placeholder","Tu email","aria-label","Email para newsletter","required","",1,"form-control"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-paper-plane"],[1,"text-white"],[1,"border-secondary","my-4"],[1,"row","align-items-center"],[1,"col-md-6","text-center","text-md-start"],[1,"text-white","mb-0"],[1,"col-md-6"],[1,"footer-legal","text-center","text-md-end"],["href","/privacidad",1,"text-white","text-decoration-none","me-3","hover-primary"],["href","/terminos",1,"text-white","text-decoration-none","me-3","hover-primary"],["href","/cookies",1,"text-white","text-decoration-none","hover-primary"]],template:function(i,n){i&1&&(e(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),c(6,"img",6),t(),e(7,"div",7)(8,"h6",8),o(9,"Direcci\xF3n:"),t(),e(10,"p",9),o(11,"Calle Tal 69, Cabo Cope"),t()(),e(12,"div",7)(13,"h6",8),o(14,"Contacto:"),t(),e(15,"div",10)(16,"a",11),c(17,"i",12),o(18," +54 9 11 1234 5678 "),t(),e(19,"a",13),c(20,"i",14),o(21,' contacto"@"cosechaencope.com '),t()()(),e(22,"div",15)(23,"h6",16),o(24,"S\xEDguenos:"),t(),e(25,"div",17)(26,"a",18),c(27,"i",19),t(),e(28,"a",20),c(29,"i",21),t(),e(30,"a",22),c(31,"i",23),t(),e(32,"a",24),c(33,"i",25),t()()()()(),e(34,"div",26)(35,"h6",16),o(36,"Navegaci\xF3n"),t(),e(37,"nav",27)(38,"a",28),o(39,"Inicio"),t(),e(40,"a",29),o(41,"Productos"),t(),e(42,"a",30),o(43,"\xBFQui\xE9nes somos?"),t(),e(44,"a",31),o(45,"Categor\xEDas"),t(),e(46,"a",32),o(47,"Contacto"),t()()(),e(48,"div",26)(49,"h6",16),o(50,"Categor\xEDas"),t(),e(51,"nav",27)(52,"a",33),o(53,"Frutas"),t(),e(54,"a",34),o(55,"Verduras"),t(),e(56,"a",35),o(57,"Hortalizas"),t(),e(58,"a",36),o(59,"Cereales"),t(),e(60,"a",37),o(61,"\xDAnete como Productor"),t()()(),e(62,"div",3)(63,"h6",16),o(64,"Mantente Informado"),t(),e(65,"p",38),o(66," Suscr\xEDbete a nuestro bolet\xEDn para recibir noticias sobre nuevos productos y productores. "),t(),e(67,"form",39)(68,"div",40),c(69,"input",41),e(70,"button",42),c(71,"i",43),t()()(),e(72,"small",44),o(73," Al suscribirte, aceptas nuestra pol\xEDtica de privacidad. "),t()()(),c(74,"hr",45),e(75,"div",46)(76,"div",47)(77,"p",48),o(78," \xA9 2025 Cosecha en Cope. Todos los derechos reservados. "),t()(),e(79,"div",49)(80,"nav",50)(81,"a",51),o(82," Pol\xEDtica de privacidad "),t(),e(83,"a",52),o(84," T\xE9rminos de servicio "),t(),e(85,"a",53),o(86," Configuraci\xF3n de cookies "),t()()()()()())},dependencies:[h,v],styles:["[_nghost-%COMP%]{display:block}.footer[_ngcontent-%COMP%]{padding:80px 0;background:#fff;border-top:1px solid rgba(0,0,0,.062745098)}.container[_ngcontent-%COMP%]{max-width:1280px;margin:0 auto;padding:0 24px;display:flex;flex-direction:column;gap:80px}.footer__content[_ngcontent-%COMP%]{display:flex;gap:64px}.footer__about[_ngcontent-%COMP%]{flex:2;display:flex;flex-direction:column;gap:24px}.footer__logo[_ngcontent-%COMP%]{display:flex;align-items:center}.footer__logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:auto;height:170px;max-width:170px;object-fit:contain}.footer__block[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.block__title[_ngcontent-%COMP%]{font:600 14px/1.5 Roboto,system-ui;color:#000}.block__text[_ngcontent-%COMP%]{font:400 14px/1.5 Roboto,system-ui;color:#000}.block__links[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.block__links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;text-decoration:underline}.footer__social[_ngcontent-%COMP%]{display:flex;gap:12px}.ico[_ngcontent-%COMP%]{width:24px;height:24px;display:inline-block;background-size:cover;background-position:center}.ico--fb[_ngcontent-%COMP%]{background-image:url(/iconos/facebook.png)}.ico--ig[_ngcontent-%COMP%]{background-image:url(/iconos/instagram.png)}.ico--in[_ngcontent-%COMP%]{background-image:url(/iconos/linkedin.png)}.ico--x[_ngcontent-%COMP%]{background-image:url(/iconos/gorjeo.png)}.footer__links[_ngcontent-%COMP%]{flex:1;display:flex;gap:24px}.footer__links[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;min-width:188px}.footer__links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;text-decoration:none;font:600 14px/1.5 Roboto,system-ui}.footer__divider[_ngcontent-%COMP%]{border:1px solid #000}.footer__credits[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:24px}.copy[_ngcontent-%COMP%]{font:400 14px/1.5 Roboto,system-ui;color:#000}.legal[_ngcontent-%COMP%]{display:flex;gap:24px}.legal[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;text-decoration:underline;font:400 14px/1.5 Roboto,system-ui}@media (max-width: 900px){.footer__content[_ngcontent-%COMP%]{flex-direction:column}.footer__credits[_ngcontent-%COMP%]{flex-direction:column;gap:12px}}"]})};var ce=class a{fb=s(q);auth=s(H);router=s(M);route=s(A);loading=!1;esProductor=!1;form=this.fb.nonNullable.group({email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]]});ngOnInit(){this.route.data.subscribe(r=>this.esProductor=!!r.productor)}onSubmit(){if(this.form.invalid)return;this.loading=!0;let r=this.form.getRawValue();(this.esProductor?this.auth.loginProductor(r):this.auth.login(r)).pipe(R(()=>this.loading=!1)).subscribe({next:n=>{let m=n.tipoUsuario==="PRODUCTOR"?"/productor/dashboard":"/articulos";this.router.navigateByUrl(m)},error:n=>this.router.navigate(["/error"],{queryParams:{code:n?.status??0,m:"No se pudo iniciar sesi\xF3n"}})})}static \u0275fac=function(i){return new(i||a)};static \u0275cmp=_({type:a,selectors:[["app-sign-in"]],decls:26,vars:5,consts:[[1,"auth"],[1,"container","auth__container"],[1,"auth__card"],[1,"auth__head"],[1,"auth__title"],[1,"auth__subtitle"],["novalidate","",1,"form",3,"ngSubmit","formGroup"],[1,"form__row"],["for","email",1,"form__label"],["id","email","type","email","formControlName","email","required","","aria-describedby","emailHelp",1,"form__input"],["id","emailHelp","aria-live","polite",1,"form__hint"],["for","password",1,"form__label"],["id","password","type","password","formControlName","password","required","","minlength","6",1,"form__input"],[1,"form__actions"],["type","submit",1,"btn-entrar","btn--primary",3,"disabled"],["routerLink","/registro",1,"btn","btn--outline"]],template:function(i,n){i&1&&(c(0,"app-navbar"),e(1,"section",0)(2,"div",1)(3,"div",2)(4,"header",3)(5,"h1",4),o(6,"Iniciar sesi\xF3n"),t(),e(7,"p",5),o(8,"Accede a tu cuenta para continuar."),t()(),e(9,"form",6),C("ngSubmit",function(){return n.onSubmit()}),e(10,"div",7)(11,"label",8),o(12,"Email"),t(),c(13,"input",9),e(14,"p",10),o(15),t()(),e(16,"div",7)(17,"label",11),o(18,"Contrase\xF1a"),t(),c(19,"input",12),t(),e(20,"div",13)(21,"button",14),o(22," Entrar "),t(),e(23,"a",15),o(24,"Crear cuenta"),t()()()()()(),c(25,"app-footer")),i&2&&(l(9),u("formGroup",n.form),l(4),b("aria-invalid",n.form.controls.email.invalid&&n.form.controls.email.touched),l(2),g(" ",n.form.controls.email.touched&&n.form.controls.email.invalid?"Introduce un email v\xE1lido":""," "),l(4),b("aria-invalid",n.form.controls.password.invalid&&n.form.controls.password.touched),l(2),u("disabled",n.form.invalid||n.loading))},dependencies:[h,U,N,I,E,F,z,L,T,D,v,O,x,P],styles:["[_nghost-%COMP%]{display:block}.auth[_ngcontent-%COMP%]{background:#fff;padding:80px 0}.container[_ngcontent-%COMP%]{max-width:1280px;margin:0 auto;padding:0 24px}.auth__container[_ngcontent-%COMP%]{display:flex;justify-content:center}.auth__card[_ngcontent-%COMP%]{width:100%;max-width:640px;border:1px solid #000;background:#fff;padding:48px;display:flex;flex-direction:column;gap:32px}.auth__head[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.auth__title[_ngcontent-%COMP%]{font:700 40px/1.2 Roboto,system-ui;margin:0;color:#000}.auth__subtitle[_ngcontent-%COMP%]{font:400 16px/1.5 Roboto,system-ui;margin:0;color:#000}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form__row[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form__label[_ngcontent-%COMP%]{font:600 14px/1.5 Roboto,system-ui;color:#000}.form__input[_ngcontent-%COMP%]{height:48px;padding:12px;border:1px solid #000;outline:none;font:400 16px/1.5 Roboto,system-ui;color:#000;background:#fff}.form__input[aria-invalid=true][_ngcontent-%COMP%]{outline:2px solid #ff6b6b}.form__hint[_ngcontent-%COMP%]{min-height:18px;font:400 12px/1.5 Roboto,system-ui;color:#c00;margin:0}.form__actions[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:1px solid #000;text-decoration:none;display:inline-flex;align-items:center}.btn-entrar[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.6rem 1.2rem;background:#4caf50;color:#fff;font-weight:600;border-radius:8px;text-decoration:none;transition:all .3s ease;box-shadow:0 4px 10px #0000001a}.btn-entrar[_ngcontent-%COMP%]   .chev[_ngcontent-%COMP%]{font-size:1.2rem;transition:transform .3s ease}.btn-entrar[_ngcontent-%COMP%]:hover{background:#45a049;transform:translateY(-2px);box-shadow:0 6px 14px #0003}.btn-entrar[_ngcontent-%COMP%]:hover   .chev[_ngcontent-%COMP%]{transform:translate(4px)}.btn--outline[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.6rem 1.2rem;background:#fff;color:#000;font-weight:600;border-radius:8px;text-decoration:none;transition:all .3s ease;box-shadow:0 4px 10px #0000001a}.btn--outline[_ngcontent-%COMP%]   .chev[_ngcontent-%COMP%]{font-size:1.2rem;transition:transform .3s ease}.btn--outline[_ngcontent-%COMP%]:hover{background:#fbfcfb;transform:translateY(-2px);box-shadow:0 6px 14px #0003}.btn--outline[_ngcontent-%COMP%]:hover   .chev[_ngcontent-%COMP%]{transform:translate(4px)}@media (max-width: 720px){.auth__card[_ngcontent-%COMP%]{padding:24px}}"]})};var se=class a{route=s(A);code=this.route.snapshot.queryParamMap.get("code")??"0";message=this.route.snapshot.queryParamMap.get("m")??"Intenta nuevamente en unos minutos";static \u0275fac=function(i){return new(i||a)};static \u0275cmp=_({type:a,selectors:[["app-sign-err"]],decls:14,vars:2,consts:[[1,"error","container"],[1,"actions"],["routerLink","/"],["routerLink","/login"]],template:function(i,n){i&1&&(c(0,"app-navbar"),e(1,"section",0)(2,"h1"),o(3,"Ha ocurrido un problema"),t(),e(4,"p"),o(5),t(),e(6,"p"),o(7),t(),e(8,"div",1)(9,"a",2),o(10,"Ir a inicio"),t(),e(11,"a",3),o(12,"Ir a login"),t()()(),c(13,"app-footer")),i&2&&(l(5),g("C\xF3digo: ",n.code,""),l(2),$(n.message))},dependencies:[h,v,O,x,P],styles:[".container[_ngcontent-%COMP%]{max-width:560px;margin:2rem auto}.actions[_ngcontent-%COMP%]{display:flex;gap:12px}"]})};var me=class a{static \u0275fac=function(i){return new(i||a)};static \u0275cmp=_({type:a,selectors:[["app-auth-selector"]],decls:59,vars:0,consts:[[1,"auth-selector"],[1,"container","auth-selector__container"],[1,"auth-selector__content"],[1,"auth-selector__header"],[1,"auth-selector__title"],[1,"auth-selector__subtitle"],[1,"auth-selector__cards"],[1,"user-card","user-card--cliente"],[1,"user-card__icon"],[1,"fas","fa-shopping-cart"],[1,"user-card__title"],[1,"user-card__description"],[1,"user-card__features"],[1,"user-card__actions"],["routerLink","/cliente/login",1,"btn","btn--primary"],["routerLink","/cliente/registro",1,"btn","btn--outline"],[1,"user-card","user-card--productor"],[1,"fas","fa-seedling"],["routerLink","/productor/login",1,"btn","btn--primary"],["routerLink","/productor/registro",1,"btn","btn--outline"],[1,"auth-selector__footer"],["routerLink","/articulos"]],template:function(i,n){i&1&&(c(0,"app-navbar"),e(1,"section",0)(2,"div",1)(3,"div",2)(4,"header",3)(5,"h1",4),o(6,"\xBFC\xF3mo quieres acceder?"),t(),e(7,"p",5),o(8,"Selecciona el tipo de cuenta que mejor se adapte a ti"),t()(),e(9,"div",6)(10,"div",7)(11,"div",8),c(12,"i",9),t(),e(13,"h2",10),o(14,"Soy Cliente"),t(),e(15,"p",11),o(16," Quiero comprar productos agr\xEDcolas frescos y locales directamente de los productores. "),t(),e(17,"ul",12)(18,"li"),o(19,"Explorar productos locales"),t(),e(20,"li"),o(21,"Comprar directamente a productores"),t(),e(22,"li"),o(23,"Descubrir productos de temporada"),t(),e(24,"li"),o(25,"Conocer el origen de tus alimentos"),t()(),e(26,"div",13)(27,"a",14),o(28,"Iniciar Sesi\xF3n"),t(),e(29,"a",15),o(30,"Registrarse"),t()()(),e(31,"div",16)(32,"div",8),c(33,"i",17),t(),e(34,"h2",10),o(35,"Soy Productor"),t(),e(36,"p",11),o(37," Quiero vender mis productos agr\xEDcolas directamente a los consumidores locales. "),t(),e(38,"ul",12)(39,"li"),o(40,"Gestionar tu cat\xE1logo de productos"),t(),e(41,"li"),o(42,"Crear categor\xEDas personalizadas"),t(),e(43,"li"),o(44,"Vender sin intermediarios"),t(),e(45,"li"),o(46,"Conectar con clientes locales"),t()(),e(47,"div",13)(48,"a",18),o(49,"Acceder al Panel"),t(),e(50,"a",19),o(51,"Registrarse"),t()()()(),e(52,"div",20)(53,"p"),o(54,"\xBFNo est\xE1s seguro? "),e(55,"a",21),o(56,"Explora nuestros productos"),t(),o(57," antes de registrarte."),t()()()()(),c(58,"app-footer"))},dependencies:[h,v,O,x,P],styles:['@charset "UTF-8";.auth-selector[_ngcontent-%COMP%]{min-height:calc(100vh - 120px);padding:3rem 0;background:linear-gradient(135deg,#f8f9fa,#e9ecef,#dee2e6)}.auth-selector__container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 1rem}.auth-selector__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.auth-selector__header[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem;max-width:600px}.auth-selector__title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#2c5c2d;margin-bottom:1rem}.auth-selector__subtitle[_ngcontent-%COMP%]{font-size:1.2rem;color:#6c757d;margin:0;line-height:1.5}.auth-selector__cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:2rem;width:100%;max-width:800px;margin-bottom:2rem}.user-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2.5rem;box-shadow:0 8px 32px #0000001a;border:2px solid transparent;transition:all .3s ease;text-align:center;position:relative;overflow:hidden}.user-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#28a745,#20c997);transition:all .3s ease}.user-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 16px 48px #00000026}.user-card--productor[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#d63384,#fd7e14)}.user-card__icon[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 1.5rem;background:linear-gradient(135deg,#28a745,#20c997);color:#fff;font-size:2rem}.user-card--productor[_ngcontent-%COMP%]   .user-card__icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d63384,#fd7e14)}.user-card__title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#2c5c2d;margin-bottom:1rem}.user-card--productor[_ngcontent-%COMP%]   .user-card__title[_ngcontent-%COMP%]{color:#d63384}.user-card__description[_ngcontent-%COMP%]{color:#6c757d;line-height:1.6;margin-bottom:1.5rem;font-size:1rem}.user-card__features[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0 0 2rem;text-align:left}.user-card__features[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#495057;position:relative;padding:.5rem 0 .5rem 1.5rem}.user-card__features[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\2713";position:absolute;left:0;color:#28a745;font-weight:700}.user-card--productor[_ngcontent-%COMP%]   .user-card__features[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{color:#d63384}.user-card__actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;text-decoration:none;text-align:center;cursor:pointer;transition:all .3s ease;display:inline-block}.btn--primary[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn--primary[_ngcontent-%COMP%]:hover{background:#218838;text-decoration:none;transform:translateY(-1px)}.user-card--productor[_ngcontent-%COMP%]   .btn--primary[_ngcontent-%COMP%]{background:#d63384}.user-card--productor[_ngcontent-%COMP%]   .btn--primary[_ngcontent-%COMP%]:hover{background:#b02a5b}.btn--outline[_ngcontent-%COMP%]{background:transparent;color:#28a745;border:2px solid #28a745}.btn--outline[_ngcontent-%COMP%]:hover{background:#28a745;color:#fff;text-decoration:none}.user-card--productor[_ngcontent-%COMP%]   .btn--outline[_ngcontent-%COMP%]{color:#d63384;border-color:#d63384}.user-card--productor[_ngcontent-%COMP%]   .btn--outline[_ngcontent-%COMP%]:hover{background:#d63384;color:#fff}.auth-selector__footer[_ngcontent-%COMP%]{text-align:center;margin-top:2rem}.auth-selector__footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:1rem;margin:0}.auth-selector__footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#2c5c2d;text-decoration:none;font-weight:600}.auth-selector__footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 768px){.auth-selector__title[_ngcontent-%COMP%]{font-size:2rem}.auth-selector__subtitle[_ngcontent-%COMP%]{font-size:1.1rem}.auth-selector__cards[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem;padding:0 1rem}.user-card[_ngcontent-%COMP%]{padding:2rem}.user-card__actions[_ngcontent-%COMP%]{gap:.5rem}}@media (max-width: 480px){.auth-selector[_ngcontent-%COMP%]{padding:2rem 0}.auth-selector__header[_ngcontent-%COMP%]{margin-bottom:2rem}.auth-selector__title[_ngcontent-%COMP%]{font-size:1.75rem}.user-card[_ngcontent-%COMP%]{padding:1.5rem}.user-card__icon[_ngcontent-%COMP%]{width:60px;height:60px;font-size:1.5rem}}']})};function Je(a,r){a&1&&(e(0,"div",20)(1,"p"),o(2,"\xA1Registro exitoso! Ya puedes iniciar sesi\xF3n con tu cuenta."),t()())}var de=class a{fb=s(q);auth=s(H);router=s(M);route=s(A);loading=!1;registroExitoso=!1;form=this.fb.nonNullable.group({email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]]});ngOnInit(){this.route.queryParams.subscribe(r=>{this.registroExitoso=r.ok==="1"})}onSubmit(){if(this.form.invalid)return;this.loading=!0;let r=this.form.getRawValue();this.auth.login(r).pipe(R(()=>this.loading=!1)).subscribe({next:i=>{if(i.tipoUsuario!=="CLIENTE"){this.router.navigate(["/error"],{queryParams:{code:403,m:"Acceso denegado. Usa el login de productores."}});return}this.router.navigateByUrl("/articulos")},error:i=>{this.router.navigate(["/error"],{queryParams:{code:i?.status??0,m:"Error al iniciar sesi\xF3n como cliente"}})}})}static \u0275fac=function(i){return new(i||a)};static \u0275cmp=_({type:a,selectors:[["app-cliente-sign-in"]],decls:34,vars:8,consts:[[1,"auth"],[1,"container","auth__container"],[1,"auth__card"],[1,"auth__head"],[1,"auth__title"],[1,"auth__subtitle"],["class","alert alert--success",4,"ngIf"],["novalidate","",1,"form",3,"ngSubmit","formGroup"],[1,"form__row"],["for","email",1,"form__label"],["id","email","type","email","formControlName","email","required","","aria-describedby","emailHelp",1,"form__input"],["id","emailHelp","aria-live","polite",1,"form__hint"],["for","password",1,"form__label"],["id","password","type","password","formControlName","password","required","","minlength","6",1,"form__input"],["aria-live","polite",1,"form__hint"],[1,"form__actions"],["type","submit",1,"btn","btn--primary",3,"disabled"],["routerLink","/cliente/registro",1,"btn","btn--outline"],[1,"form__footer"],["routerLink","/productor/login"],[1,"alert","alert--success"]],template:function(i,n){i&1&&(c(0,"app-navbar"),e(1,"section",0)(2,"div",1)(3,"div",2)(4,"header",3)(5,"h1",4),o(6,"Login Cliente"),t(),e(7,"p",5),o(8,"Accede a tu cuenta para comprar productos locales."),t()(),w(9,Je,3,0,"div",6),e(10,"form",7),C("ngSubmit",function(){return n.onSubmit()}),e(11,"div",8)(12,"label",9),o(13,"Email"),t(),c(14,"input",10),e(15,"p",11),o(16),t()(),e(17,"div",8)(18,"label",12),o(19,"Contrase\xF1a"),t(),c(20,"input",13),e(21,"p",14),o(22),t()(),e(23,"div",15)(24,"button",16),o(25),t(),e(26,"a",17),o(27,"Crear cuenta de cliente"),t()(),e(28,"div",18)(29,"p"),o(30,"\xBFEres productor? "),e(31,"a",19),o(32,"Inicia sesi\xF3n aqu\xED"),t()()()()()()(),c(33,"app-footer")),i&2&&(l(9),u("ngIf",n.registroExitoso),l(),u("formGroup",n.form),l(4),b("aria-invalid",n.form.controls.email.invalid&&n.form.controls.email.touched),l(2),g(" ",n.form.controls.email.touched&&n.form.controls.email.invalid?"Introduce un email v\xE1lido":""," "),l(4),b("aria-invalid",n.form.controls.password.invalid&&n.form.controls.password.touched),l(2),g(" ",n.form.controls.password.touched&&n.form.controls.password.invalid?"M\xEDnimo 6 caracteres":""," "),l(2),u("disabled",n.form.invalid||n.loading),l(),g(" ",n.loading?"Iniciando sesi\xF3n...":"Iniciar Sesi\xF3n"," "))},dependencies:[h,G,U,N,I,E,F,z,L,T,D,v,O,x,P],styles:[".auth[_ngcontent-%COMP%]{min-height:calc(100vh - 120px);padding:2rem 0;background:linear-gradient(135deg,#f8f9fa,#e9ecef)}.auth__container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:calc(100vh - 200px)}.auth__card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 8px 32px #0000001a;padding:2.5rem;width:100%;max-width:420px;border:1px solid #e9ecef}.auth__head[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.auth__title[_ngcontent-%COMP%]{color:#2c5c2d;font-size:1.8rem;font-weight:700;margin-bottom:.5rem}.auth__subtitle[_ngcontent-%COMP%]{color:#6c757d;font-size:1rem;margin:0}.alert[_ngcontent-%COMP%]{padding:1rem;border-radius:8px;margin-bottom:1.5rem}.alert--success[_ngcontent-%COMP%]{background-color:#d4edda;border:1px solid #c3e6cb;color:#155724}.alert--success[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-weight:500}.form__row[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form__label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#2c5c2d;margin-bottom:.5rem;font-size:.95rem}.form__input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #e9ecef;border-radius:8px;font-size:1rem;transition:all .3s ease}.form__input[_ngcontent-%COMP%]:focus{outline:none;border-color:#28a745;box-shadow:0 0 0 3px #28a7451a}.form__input[aria-invalid=true][_ngcontent-%COMP%]{border-color:#dc3545}.form__input[aria-invalid=true][_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 3px #dc35451a}.form__hint[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin:.25rem 0 0;min-height:1.2rem}.form__actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:1.5rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;text-decoration:none;text-align:center;cursor:pointer;transition:all .3s ease;display:inline-block}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn--primary[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn--primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#218838;transform:translateY(-1px)}.btn--outline[_ngcontent-%COMP%]{background:transparent;color:#28a745;border:2px solid #28a745}.btn--outline[_ngcontent-%COMP%]:hover{background:#28a745;color:#fff;text-decoration:none}.form__footer[_ngcontent-%COMP%]{text-align:center;margin-top:1rem}.form__footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:.95rem;margin:0}.form__footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#28a745;text-decoration:none;font-weight:600}.form__footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 576px){.auth__card[_ngcontent-%COMP%]{margin:1rem;padding:1.5rem}.auth__title[_ngcontent-%COMP%]{font-size:1.5rem}.form__actions[_ngcontent-%COMP%]{gap:.75rem}}"]})};function et(a,r){return i=>{let n=i.get(a)?.value,m=i.get(r)?.value;return n===m?null:{mismatch:!0}}}var pe=class a{fb=s(q);auth=s(H);router=s(M);loading=!1;form=this.fb.nonNullable.group({email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],confirm:["",[d.required]],nombre:["",[d.required]],direccion:[""],telefono:[""],terms:[!1,d.requiredTrue]},{validators:et("password","confirm")});onSubmit(){if(this.form.invalid)return;let{email:r,password:i,nombre:n,direccion:m,telefono:p}=this.form.getRawValue();this.loading=!0,this.auth.registerCliente({email:r,password:i,nombre:n,direccion:m,telefono:p}).pipe(R(()=>this.loading=!1)).subscribe({next:()=>this.router.navigate(["/cliente/login"],{queryParams:{ok:1}}),error:B=>this.router.navigate(["/error"],{queryParams:{code:B?.status??0,m:"Error en el registro de cliente"}})})}static \u0275fac=function(i){return new(i||a)};static \u0275cmp=_({type:a,selectors:[["app-cliente-sign-up"]],decls:57,vars:11,consts:[[1,"auth"],[1,"container","auth__container"],[1,"auth__card"],[1,"auth__head"],[1,"auth__title"],[1,"auth__subtitle"],["novalidate","",1,"form",3,"ngSubmit","formGroup"],[1,"form__row"],["for","email",1,"form__label"],["id","email","type","email","formControlName","email","required","","aria-describedby","emailHelp",1,"form__input"],["id","emailHelp","aria-live","polite",1,"form__hint"],["for","password",1,"form__label"],["id","password","type","password","formControlName","password","required","","minlength","6",1,"form__input"],["aria-live","polite",1,"form__hint"],["for","confirm",1,"form__label"],["id","confirm","type","password","formControlName","confirm","required","","aria-describedby","confirmHelp",1,"form__input"],["id","confirmHelp","aria-live","polite",1,"form__hint"],["for","nombre",1,"form__label"],["id","nombre","type","text","formControlName","nombre","required","",1,"form__input"],["for","direccion",1,"form__label"],["id","direccion","type","text","formControlName","direccion",1,"form__input"],["for","telefono",1,"form__label"],["id","telefono","type","tel","formControlName","telefono",1,"form__input"],[1,"checkbox"],["type","checkbox","formControlName","terms"],[1,"form__actions"],["type","submit",1,"btn","btn--primary",3,"disabled"],["routerLink","/cliente/login",1,"btn","btn--outline"],[1,"form__footer"],["routerLink","/productor/registro"]],template:function(i,n){i&1&&(c(0,"app-navbar"),e(1,"section",0)(2,"div",1)(3,"div",2)(4,"header",3)(5,"h1",4),o(6,"Registro de Cliente"),t(),e(7,"p",5),o(8,"Reg\xEDstrate para empezar a comprar productos locales."),t()(),e(9,"form",6),C("ngSubmit",function(){return n.onSubmit()}),e(10,"div",7)(11,"label",8),o(12,"Email *"),t(),c(13,"input",9),e(14,"p",10),o(15),t()(),e(16,"div",7)(17,"label",11),o(18,"Contrase\xF1a *"),t(),c(19,"input",12),e(20,"p",13),o(21),t()(),e(22,"div",7)(23,"label",14),o(24,"Confirmar contrase\xF1a *"),t(),c(25,"input",15),e(26,"p",16),o(27),t()(),e(28,"div",7)(29,"label",17),o(30,"Nombre completo *"),t(),c(31,"input",18),e(32,"p",13),o(33),t()(),e(34,"div",7)(35,"label",19),o(36,"Direcci\xF3n"),t(),c(37,"input",20),t(),e(38,"div",7)(39,"label",21),o(40,"Tel\xE9fono"),t(),c(41,"input",22),t(),e(42,"label",23),c(43,"input",24),e(44,"span"),o(45,"Acepto t\xE9rminos y condiciones *"),t()(),e(46,"div",25)(47,"button",26),o(48),t(),e(49,"a",27),o(50,"Ya tengo cuenta"),t()(),e(51,"div",28)(52,"p"),o(53,"\xBFEres productor? "),e(54,"a",29),o(55,"Reg\xEDstrate aqu\xED"),t()()()()()()(),c(56,"app-footer")),i&2&&(l(9),u("formGroup",n.form),l(4),b("aria-invalid",n.form.controls.email.invalid&&n.form.controls.email.touched),l(2),g(" ",n.form.controls.email.touched&&n.form.controls.email.invalid?"Introduce un email v\xE1lido":""," "),l(4),b("aria-invalid",n.form.controls.password.invalid&&n.form.controls.password.touched),l(2),g(" ",n.form.controls.password.touched&&n.form.controls.password.invalid?"M\xEDnimo 6 caracteres":""," "),l(4),b("aria-invalid",(n.form.errors==null?null:n.form.errors.mismatch)&&n.form.controls.confirm.touched),l(2),g(" ",n.form.errors!=null&&n.form.errors.mismatch?"Las contrase\xF1as no coinciden":""," "),l(4),b("aria-invalid",n.form.controls.nombre.invalid&&n.form.controls.nombre.touched),l(2),g(" ",n.form.controls.nombre.touched&&n.form.controls.nombre.invalid?"El nombre es obligatorio":""," "),l(14),u("disabled",n.form.invalid||n.loading),l(),g(" ",n.loading?"Registrando...":"Registrar Cliente"," "))},dependencies:[h,U,N,I,le,E,F,z,L,T,D,v,O,x,P],styles:[".auth[_ngcontent-%COMP%]{min-height:calc(100vh - 120px);padding:2rem 0;background:linear-gradient(135deg,#f8f9fa,#e9ecef)}.auth__container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:calc(100vh - 200px)}.auth__card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 8px 32px #0000001a;padding:2.5rem;width:100%;max-width:480px;border:1px solid #e9ecef}.auth__head[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.auth__title[_ngcontent-%COMP%]{color:#2c5c2d;font-size:1.8rem;font-weight:700;margin-bottom:.5rem}.auth__subtitle[_ngcontent-%COMP%]{color:#6c757d;font-size:1rem;margin:0}.form__row[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form__label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#2c5c2d;margin-bottom:.5rem;font-size:.95rem}.form__input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #e9ecef;border-radius:8px;font-size:1rem;transition:all .3s ease}.form__input[_ngcontent-%COMP%]:focus{outline:none;border-color:#28a745;box-shadow:0 0 0 3px #28a7451a}.form__input[aria-invalid=true][_ngcontent-%COMP%]{border-color:#dc3545}.form__input[aria-invalid=true][_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 3px #dc35451a}.form__hint[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin:.25rem 0 0;min-height:1.2rem}.checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:1.5rem;cursor:pointer}.checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto}.checkbox[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#495057;font-size:.95rem}.form__actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:1.5rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;text-decoration:none;text-align:center;cursor:pointer;transition:all .3s ease;display:inline-block}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn--primary[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn--primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#218838;transform:translateY(-1px)}.btn--outline[_ngcontent-%COMP%]{background:transparent;color:#28a745;border:2px solid #28a745}.btn--outline[_ngcontent-%COMP%]:hover{background:#28a745;color:#fff;text-decoration:none}.form__footer[_ngcontent-%COMP%]{text-align:center;margin-top:1rem}.form__footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:.95rem;margin:0}.form__footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#28a745;text-decoration:none;font-weight:600}.form__footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 576px){.auth__card[_ngcontent-%COMP%]{margin:1rem;padding:1.5rem}.auth__title[_ngcontent-%COMP%]{font-size:1.5rem}.form__actions[_ngcontent-%COMP%]{gap:.75rem}}"]})};function tt(a,r){a&1&&(e(0,"div",20)(1,"p"),o(2,"\xA1Registro exitoso! Ya puedes iniciar sesi\xF3n con tu cuenta de productor."),t()())}var ue=class a{fb=s(q);auth=s(H);router=s(M);route=s(A);loading=!1;registroExitoso=!1;form=this.fb.nonNullable.group({email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]]});ngOnInit(){this.route.queryParams.subscribe(r=>{this.registroExitoso=r.ok==="1"})}onSubmit(){if(this.form.invalid)return;this.loading=!0;let r=this.form.getRawValue();this.auth.loginProductor(r).pipe(R(()=>this.loading=!1)).subscribe({next:i=>{if(i.tipoUsuario!=="PRODUCTOR"){this.router.navigate(["/error"],{queryParams:{code:403,m:"Acceso denegado. Usa el login de clientes."}});return}this.router.navigateByUrl("/productor/dashboard")},error:i=>{this.router.navigate(["/error"],{queryParams:{code:i?.status??0,m:"Error al iniciar sesi\xF3n como productor"}})}})}static \u0275fac=function(i){return new(i||a)};static \u0275cmp=_({type:a,selectors:[["app-productor-sign-in"]],decls:34,vars:8,consts:[[1,"auth"],[1,"container","auth__container"],[1,"auth__card"],[1,"auth__head"],[1,"auth__title"],[1,"auth__subtitle"],["class","alert alert--success",4,"ngIf"],["novalidate","",1,"form",3,"ngSubmit","formGroup"],[1,"form__row"],["for","email",1,"form__label"],["id","email","type","email","formControlName","email","required","","aria-describedby","emailHelp",1,"form__input"],["id","emailHelp","aria-live","polite",1,"form__hint"],["for","password",1,"form__label"],["id","password","type","password","formControlName","password","required","","minlength","6",1,"form__input"],["aria-live","polite",1,"form__hint"],[1,"form__actions"],["type","submit",1,"btn","btn--primary",3,"disabled"],["routerLink","/productor/registro",1,"btn","btn--outline"],[1,"form__footer"],["routerLink","/cliente/login"],[1,"alert","alert--success"]],template:function(i,n){i&1&&(c(0,"app-navbar"),e(1,"section",0)(2,"div",1)(3,"div",2)(4,"header",3)(5,"h1",4),o(6,"Login Productor"),t(),e(7,"p",5),o(8,"Accede a tu panel de control para gestionar tus productos."),t()(),w(9,tt,3,0,"div",6),e(10,"form",7),C("ngSubmit",function(){return n.onSubmit()}),e(11,"div",8)(12,"label",9),o(13,"Email"),t(),c(14,"input",10),e(15,"p",11),o(16),t()(),e(17,"div",8)(18,"label",12),o(19,"Contrase\xF1a"),t(),c(20,"input",13),e(21,"p",14),o(22),t()(),e(23,"div",15)(24,"button",16),o(25),t(),e(26,"a",17),o(27,"Crear cuenta de productor"),t()(),e(28,"div",18)(29,"p"),o(30,"\xBFEres cliente? "),e(31,"a",19),o(32,"Inicia sesi\xF3n aqu\xED"),t()()()()()()(),c(33,"app-footer")),i&2&&(l(9),u("ngIf",n.registroExitoso),l(),u("formGroup",n.form),l(4),b("aria-invalid",n.form.controls.email.invalid&&n.form.controls.email.touched),l(2),g(" ",n.form.controls.email.touched&&n.form.controls.email.invalid?"Introduce un email v\xE1lido":""," "),l(4),b("aria-invalid",n.form.controls.password.invalid&&n.form.controls.password.touched),l(2),g(" ",n.form.controls.password.touched&&n.form.controls.password.invalid?"M\xEDnimo 6 caracteres":""," "),l(2),u("disabled",n.form.invalid||n.loading),l(),g(" ",n.loading?"Iniciando sesi\xF3n...":"Acceder al Panel"," "))},dependencies:[h,G,U,N,I,E,F,z,L,T,D,v,O,x,P],styles:[".auth[_ngcontent-%COMP%]{min-height:calc(100vh - 120px);padding:2rem 0;background:linear-gradient(135deg,#ffc107,#fd7e14)}.auth__container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:calc(100vh - 200px)}.auth__card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 8px 32px #0000001a;padding:2.5rem;width:100%;max-width:420px;border:1px solid #e9ecef}.auth__head[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.auth__title[_ngcontent-%COMP%]{color:#d63384;font-size:1.8rem;font-weight:700;margin-bottom:.5rem}.auth__subtitle[_ngcontent-%COMP%]{color:#6c757d;font-size:1rem;margin:0;line-height:1.4}.alert[_ngcontent-%COMP%]{padding:1rem;border-radius:8px;margin-bottom:1.5rem}.alert--success[_ngcontent-%COMP%]{background-color:#d4edda;border:1px solid #c3e6cb;color:#155724}.alert--success[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-weight:500;line-height:1.4}.form__row[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form__label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#d63384;margin-bottom:.5rem;font-size:.95rem}.form__input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #e9ecef;border-radius:8px;font-size:1rem;transition:all .3s ease}.form__input[_ngcontent-%COMP%]:focus{outline:none;border-color:#d63384;box-shadow:0 0 0 3px #d633841a}.form__input[aria-invalid=true][_ngcontent-%COMP%]{border-color:#dc3545}.form__input[aria-invalid=true][_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 3px #dc35451a}.form__hint[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin:.25rem 0 0;min-height:1.2rem}.form__actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:1.5rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;text-decoration:none;text-align:center;cursor:pointer;transition:all .3s ease;display:inline-block}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn--primary[_ngcontent-%COMP%]{background:#d63384;color:#fff}.btn--primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#b02a5b;transform:translateY(-1px)}.btn--outline[_ngcontent-%COMP%]{background:transparent;color:#d63384;border:2px solid #d63384}.btn--outline[_ngcontent-%COMP%]:hover{background:#d63384;color:#fff;text-decoration:none}.form__footer[_ngcontent-%COMP%]{text-align:center;margin-top:1rem}.form__footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:.95rem;margin:0}.form__footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#d63384;text-decoration:none;font-weight:600}.form__footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 576px){.auth__card[_ngcontent-%COMP%]{margin:1rem;padding:1.5rem}.auth__title[_ngcontent-%COMP%]{font-size:1.5rem}.form__actions[_ngcontent-%COMP%]{gap:.75rem}}"]})};function nt(a,r){return i=>{let n=i.get(a)?.value,m=i.get(r)?.value;return n===m?null:{mismatch:!0}}}var ge=class a{fb=s(q);auth=s(H);router=s(M);loading=!1;form=this.fb.nonNullable.group({email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],confirm:["",[d.required]],nombre:["",[d.required]],direccion:["",[d.required]],telefono:["",[d.required]],terms:[!1,d.requiredTrue]},{validators:nt("password","confirm")});onSubmit(){if(this.form.invalid)return;let{email:r,password:i,nombre:n,direccion:m,telefono:p}=this.form.getRawValue();this.loading=!0,this.auth.registerProductor({email:r,password:i,nombre:n,direccion:m,telefono:p}).pipe(R(()=>this.loading=!1)).subscribe({next:()=>this.router.navigate(["/productor/login"],{queryParams:{ok:1}}),error:B=>this.router.navigate(["/error"],{queryParams:{code:B?.status??0,m:"Error en el registro de productor"}})})}static \u0275fac=function(i){return new(i||a)};static \u0275cmp=_({type:a,selectors:[["app-productor-sign-up"]],decls:61,vars:15,consts:[[1,"auth"],[1,"container","auth__container"],[1,"auth__card"],[1,"auth__head"],[1,"auth__title"],[1,"auth__subtitle"],["novalidate","",1,"form",3,"ngSubmit","formGroup"],[1,"form__row"],["for","email",1,"form__label"],["id","email","type","email","formControlName","email","required","","aria-describedby","emailHelp",1,"form__input"],["id","emailHelp","aria-live","polite",1,"form__hint"],["for","password",1,"form__label"],["id","password","type","password","formControlName","password","required","","minlength","6",1,"form__input"],["aria-live","polite",1,"form__hint"],["for","confirm",1,"form__label"],["id","confirm","type","password","formControlName","confirm","required","","aria-describedby","confirmHelp",1,"form__input"],["id","confirmHelp","aria-live","polite",1,"form__hint"],["for","nombre",1,"form__label"],["id","nombre","type","text","formControlName","nombre","required","","placeholder","Ej: Huerto Los Naranjos",1,"form__input"],["for","direccion",1,"form__label"],["id","direccion","type","text","formControlName","direccion","required","","placeholder","Direcci\xF3n completa de la explotaci\xF3n agr\xEDcola",1,"form__input"],["for","telefono",1,"form__label"],["id","telefono","type","tel","formControlName","telefono","required","","placeholder","Ej: 666 123 456",1,"form__input"],[1,"checkbox"],["type","checkbox","formControlName","terms"],[1,"form__actions"],["type","submit",1,"btn","btn--primary",3,"disabled"],["routerLink","/productor/login",1,"btn","btn--outline"],[1,"form__footer"],["routerLink","/cliente/registro"]],template:function(i,n){i&1&&(c(0,"app-navbar"),e(1,"section",0)(2,"div",1)(3,"div",2)(4,"header",3)(5,"h1",4),o(6,"Registro de Productor"),t(),e(7,"p",5),o(8,"Reg\xEDstrate para empezar a vender tus productos agr\xEDcolas."),t()(),e(9,"form",6),C("ngSubmit",function(){return n.onSubmit()}),e(10,"div",7)(11,"label",8),o(12,"Email *"),t(),c(13,"input",9),e(14,"p",10),o(15),t()(),e(16,"div",7)(17,"label",11),o(18,"Contrase\xF1a *"),t(),c(19,"input",12),e(20,"p",13),o(21),t()(),e(22,"div",7)(23,"label",14),o(24,"Confirmar contrase\xF1a *"),t(),c(25,"input",15),e(26,"p",16),o(27),t()(),e(28,"div",7)(29,"label",17),o(30,"Nombre de la explotaci\xF3n *"),t(),c(31,"input",18),e(32,"p",13),o(33),t()(),e(34,"div",7)(35,"label",19),o(36,"Direcci\xF3n de la explotaci\xF3n *"),t(),c(37,"input",20),e(38,"p",13),o(39),t()(),e(40,"div",7)(41,"label",21),o(42,"Tel\xE9fono de contacto *"),t(),c(43,"input",22),e(44,"p",13),o(45),t()(),e(46,"label",23),c(47,"input",24),e(48,"span"),o(49,"Acepto t\xE9rminos y condiciones para productores *"),t()(),e(50,"div",25)(51,"button",26),o(52),t(),e(53,"a",27),o(54,"Ya tengo cuenta de productor"),t()(),e(55,"div",28)(56,"p"),o(57,"\xBFEres cliente? "),e(58,"a",29),o(59,"Reg\xEDstrate aqu\xED"),t()()()()()()(),c(60,"app-footer")),i&2&&(l(9),u("formGroup",n.form),l(4),b("aria-invalid",n.form.controls.email.invalid&&n.form.controls.email.touched),l(2),g(" ",n.form.controls.email.touched&&n.form.controls.email.invalid?"Introduce un email v\xE1lido":""," "),l(4),b("aria-invalid",n.form.controls.password.invalid&&n.form.controls.password.touched),l(2),g(" ",n.form.controls.password.touched&&n.form.controls.password.invalid?"M\xEDnimo 6 caracteres":""," "),l(4),b("aria-invalid",(n.form.errors==null?null:n.form.errors.mismatch)&&n.form.controls.confirm.touched),l(2),g(" ",n.form.errors!=null&&n.form.errors.mismatch?"Las contrase\xF1as no coinciden":""," "),l(4),b("aria-invalid",n.form.controls.nombre.invalid&&n.form.controls.nombre.touched),l(2),g(" ",n.form.controls.nombre.touched&&n.form.controls.nombre.invalid?"El nombre de la explotaci\xF3n es obligatorio":""," "),l(4),b("aria-invalid",n.form.controls.direccion.invalid&&n.form.controls.direccion.touched),l(2),g(" ",n.form.controls.direccion.touched&&n.form.controls.direccion.invalid?"La direcci\xF3n es obligatoria":""," "),l(4),b("aria-invalid",n.form.controls.telefono.invalid&&n.form.controls.telefono.touched),l(2),g(" ",n.form.controls.telefono.touched&&n.form.controls.telefono.invalid?"El tel\xE9fono de contacto es obligatorio":""," "),l(6),u("disabled",n.form.invalid||n.loading),l(),g(" ",n.loading?"Registrando...":"Registrar Productor"," "))},dependencies:[h,U,N,I,le,E,F,z,L,T,D,v,O,x,P],styles:[".auth[_ngcontent-%COMP%]{min-height:calc(100vh - 120px);padding:2rem 0;background:linear-gradient(135deg,#ffc107,#fd7e14)}.auth__container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:calc(100vh - 200px)}.auth__card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 8px 32px #0000001a;padding:2.5rem;width:100%;max-width:480px;border:1px solid #e9ecef}.auth__head[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.auth__title[_ngcontent-%COMP%]{color:#d63384;font-size:1.8rem;font-weight:700;margin-bottom:.5rem}.auth__subtitle[_ngcontent-%COMP%]{color:#6c757d;font-size:1rem;margin:0;line-height:1.4}.form__row[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form__label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#d63384;margin-bottom:.5rem;font-size:.95rem}.form__input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #e9ecef;border-radius:8px;font-size:1rem;transition:all .3s ease}.form__input[_ngcontent-%COMP%]:focus{outline:none;border-color:#d63384;box-shadow:0 0 0 3px #d633841a}.form__input[aria-invalid=true][_ngcontent-%COMP%]{border-color:#dc3545}.form__input[aria-invalid=true][_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 3px #dc35451a}.form__input[_ngcontent-%COMP%]::placeholder{color:#adb5bd;font-style:italic}.form__hint[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin:.25rem 0 0;min-height:1.2rem}.checkbox[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.5rem;margin-bottom:1.5rem;cursor:pointer}.checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin-top:.2rem;flex-shrink:0}.checkbox[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#495057;font-size:.95rem;line-height:1.4}.form__actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:1.5rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;text-decoration:none;text-align:center;cursor:pointer;transition:all .3s ease;display:inline-block}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn--primary[_ngcontent-%COMP%]{background:#d63384;color:#fff}.btn--primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#b02a5b;transform:translateY(-1px)}.btn--outline[_ngcontent-%COMP%]{background:transparent;color:#d63384;border:2px solid #d63384}.btn--outline[_ngcontent-%COMP%]:hover{background:#d63384;color:#fff;text-decoration:none}.form__footer[_ngcontent-%COMP%]{text-align:center;margin-top:1rem}.form__footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:.95rem;margin:0}.form__footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#d63384;text-decoration:none;font-weight:600}.form__footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 576px){.auth__card[_ngcontent-%COMP%]{margin:1rem;padding:1.5rem}.auth__title[_ngcontent-%COMP%]{font-size:1.5rem}.form__actions[_ngcontent-%COMP%]{gap:.75rem}}"]})};var fe=class a{http=s(ae);getArticulos(){return this.http.get(y.ARTICULOS.GET_ALL)}getArticulosPorCategoria(r){return this.http.get(y.CATEGORIAS.GET_ARTICULOS_BY_CATEGORIA(r))}getArticuloPorId(r){return this.http.get(y.ARTICULOS.GET_BY_ID(r))}crearArticulo(r){return this.http.post(y.ARTICULOS.CREATE,r)}actualizarArticulo(r,i){return this.http.put(y.ARTICULOS.UPDATE(r),i)}eliminarArticulo(r){return this.http.delete(y.ARTICULOS.DELETE(r))}static \u0275fac=function(i){return new(i||a)};static \u0275prov=ne({token:a,factory:a.\u0275fac,providedIn:"root"})};function rt(a,r){if(a&1&&(e(0,"span",28),o(1),Ie(2,"currency"),t()),a&2){let i=X().$implicit;l(),g(" ",Fe(2,1,i.precio,"EUR","symbol","1.2-2")," ")}}function it(a,r){if(a&1){let i=Ee();e(0,"div",15)(1,"div",16)(2,"div",17)(3,"img",18),C("error",function(m){Ce(i);let p=X(2);return ve(p.onImageError(m))}),t(),e(4,"div",19)(5,"div",20)(6,"h3",21),o(7),t(),e(8,"p",22),o(9),t(),e(10,"span",23),o(11),t(),w(12,rt,3,6,"span",24),t(),e(13,"div",25)(14,"button",26),C("click",function(){let m=Ce(i).$implicit,p=X(2);return ve(p.addToCart(m))}),c(15,"i",27),t()()()()()()}if(a&2){let i=r.$implicit;l(3),u("src",i.imagenUrl||"/images/placeholder-product.svg",oe)("alt",i.nombre),l(4),$(i.nombre),l(2),$(i.nombreProductor),l(2),$(i.nombreCategoria),l(),u("ngIf",i.precio>0)}}function at(a,r){if(a&1&&(e(0,"div",13),w(1,it,16,6,"div",14),t()),a&2){let i=X();l(),u("ngForOf",i.articulosFiltrados)}}function lt(a,r){a&1&&(e(0,"div",29),c(1,"i",30),e(2,"h3",31),o(3,"No hay productos disponibles"),t(),e(4,"p",32),o(5,"Pronto a\xF1adiremos nuevos productos frescos."),t()())}var ee=class a{constructor(r,i){this.articuloService=r;this.route=i}articulos=[];categoriaSeleccionada="";get articulosFiltrados(){return this.categoriaSeleccionada?this.articulos.filter(r=>String(r.idCategoria)===this.categoriaSeleccionada):this.articulos}ngOnInit(){this.route.paramMap.subscribe(r=>{let i=r.get("idCategoria");i?this.cargarArticulosPorCategoria(Number(i)):this.cargarTodosLosArticulos()})}cargarTodosLosArticulos(){this.articuloService.getArticulos().subscribe({next:r=>this.articulos=r,error:r=>console.error("Error al cargar art\xEDculos",r)})}cargarArticulosPorCategoria(r){this.articuloService.getArticulosPorCategoria(r).subscribe({next:i=>{console.log(`Art\xEDculos de la categor\xEDa ${r} recibidos:`,i),this.articulos=i},error:i=>console.error(`Error al cargar art\xEDculos de la categor\xEDa ${r}`,i)})}onImageError(r){let i=r.target;i&&!i.src.includes("default-product.png")&&(i.src="/app/assets/images/default-product.png")}addToCart(r){console.log("A\xF1adiendo al carrito:",r),alert(`Producto "${r.nombre}" a\xF1adido al carrito`)}static \u0275fac=function(i){return new(i||a)(K(fe),K(A))};static \u0275cmp=_({type:a,selectors:[["app-articulo-list"]],decls:21,vars:3,consts:[[1,"gallery","py-5","bg-light"],[1,"container"],[1,"gallery__header","text-center","mb-5"],[1,"gallery__title","display-5","fw-bold","mb-3","text-primary"],[1,"gallery__subtitle","lead","text-muted"],[1,"text-center","mb-4"],["name","categoria",1,"form-select","d-inline-block","w-auto",3,"ngModelChange","ngModel"],["value",""],["value","1"],["value","2"],["value","3"],["class","row g-4",4,"ngIf"],["class","text-center py-5",4,"ngIf"],[1,"row","g-4"],["class","col-lg-3 col-md-4 col-sm-6",4,"ngFor","ngForOf"],[1,"col-lg-3","col-md-4","col-sm-6"],[1,"gallery__item"],[1,"item__image-wrapper"],["loading","lazy",1,"item__image",3,"error","src","alt"],[1,"item__overlay"],[1,"item__content"],[1,"item__name"],[1,"item__producer"],[1,"item__category","badge","bg-success"],["class","item__price badge bg-primary mt-2",4,"ngIf"],[1,"item__actions"],["aria-label","A\xF1adir al carrito",1,"btn-add-cart",3,"click"],[1,"fas","fa-shopping-cart"],[1,"item__price","badge","bg-primary","mt-2"],[1,"text-center","py-5"],[1,"fas","fa-box-open","fa-4x","text-muted","mb-3"],[1,"h4","text-muted"],[1,"text-muted"]],template:function(i,n){i&1&&(c(0,"app-navbar"),e(1,"section",0)(2,"div",1)(3,"div",2)(4,"h2",3),o(5,"Productos Destacados"),t(),e(6,"p",4),o(7," Descubre lo mejor de nuestros productores locales "),t()(),e(8,"div",5)(9,"select",6),Re("ngModelChange",function(p){return ke(n.categoriaSeleccionada,p)||(n.categoriaSeleccionada=p),p}),e(10,"option",7),o(11,"Todas las categor\xEDas"),t(),e(12,"option",8),o(13,"Frutas"),t(),e(14,"option",9),o(15,"Verduras"),t(),e(16,"option",10),o(17,"Cestas"),t()()(),w(18,at,2,1,"div",11)(19,lt,6,0,"div",12),t()(),c(20,"app-footer")),i&2&&(l(9),we("ngModel",n.categoriaSeleccionada),l(9),u("ngIf",n.articulosFiltrados.length>0),l(),u("ngIf",n.articulosFiltrados.length===0))},dependencies:[h,ie,G,Te,Ye,Ge,Be,je,E,Ve,x,P],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block}.gallery[_ngcontent-%COMP%]{padding:112px 0;background:#f8f9fa}.container[_ngcontent-%COMP%]{max-width:1280px;margin:0 auto;padding:0 24px}.gallery__header[_ngcontent-%COMP%]{text-align:center;margin-bottom:48px}.gallery__title[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;line-height:1.2;margin:0 0 16px;color:var(--bs-primary, #28a745)}.gallery__subtitle[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.5;margin:0;color:#6c757d}.gallery__item[_ngcontent-%COMP%]{width:100%;height:296px;position:relative;border-radius:8px;overflow:hidden;background:#eaeaea;box-shadow:0 4px 12px #0000001a;transition:all .3s ease;cursor:pointer}.gallery__item[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #00000026}.item__image-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;overflow:hidden}.item__image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.gallery__item[_ngcontent-%COMP%]:hover   .item__image[_ngcontent-%COMP%]{transform:scale(1.1)}.item__overlay[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(0,0,0,.95) 0%,rgba(0,0,0,.7) 60%,transparent 100%);padding:1.5rem 1rem;color:#fff;display:flex;flex-direction:column;justify-content:flex-end;min-height:140px;opacity:0;transition:opacity .3s ease}.gallery__item[_ngcontent-%COMP%]:hover   .item__overlay[_ngcontent-%COMP%]{opacity:1}.item__content[_ngcontent-%COMP%]{margin-bottom:.75rem}.item__name[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:700;margin:0 0 .5rem;color:#fff;line-height:1.3}.item__producer[_ngcontent-%COMP%]{font-size:.875rem;margin:0 0 .5rem;color:#ffffffe6;line-height:1.4}.item__category[_ngcontent-%COMP%]{display:inline-block;background:#28a745;color:#fff;padding:.25rem .75rem;border-radius:12px;font-size:.75rem;font-weight:600;margin-right:.5rem;margin-bottom:.25rem}.item__price[_ngcontent-%COMP%]{display:inline-block;background:#007bff;color:#fff;padding:.25rem .75rem;border-radius:12px;font-size:.75rem;font-weight:700}.item__actions[_ngcontent-%COMP%]{opacity:0;transform:translateY(10px);transition:all .3s ease}.gallery__item[_ngcontent-%COMP%]:hover   .item__actions[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.btn-add-cart[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;background:#fff;color:#28a745;border:none;border-radius:50%;cursor:pointer;transition:all .3s ease;font-size:1rem}.btn-add-cart[_ngcontent-%COMP%]:hover{background:#28a745;color:#fff;transform:scale(1.1)}.form-select[_ngcontent-%COMP%]{max-width:300px;border:1px solid #dee2e6;border-radius:8px;padding:.5rem 1rem;font-size:1rem;transition:all .3s ease}.form-select[_ngcontent-%COMP%]:focus{border-color:#28a745;box-shadow:0 0 0 .2rem #28a74540}.text-center[_ngcontent-%COMP%]   .fa-box-open[_ngcontent-%COMP%]{color:#6c757d}@media (max-width: 1024px){.gallery__item[_ngcontent-%COMP%]{height:260px}}@media (max-width: 768px){.gallery[_ngcontent-%COMP%]{padding:64px 0}.gallery__title[_ngcontent-%COMP%]{font-size:2rem}.gallery__subtitle[_ngcontent-%COMP%]{font-size:1rem}.gallery__item[_ngcontent-%COMP%]{height:240px}}@media (max-width: 576px){.gallery__item[_ngcontent-%COMP%]{height:220px}.item__name[_ngcontent-%COMP%]{font-size:1rem}.item__producer[_ngcontent-%COMP%]{font-size:.8rem}}']})};var _e=class a{http=s(ae);getCategorias(){return this.http.get(y.CATEGORIAS.GET_ALL)}obtenerCategoriaPorId(r){return this.http.get(y.CATEGORIAS.GET_BY_ID(r))}crearCategoria(r){return this.http.post(y.CATEGORIAS.CREATE,r)}actualizarCategoria(r,i){return this.http.put(y.CATEGORIAS.UPDATE(r),i)}eliminarCategoria(r){return this.http.delete(y.CATEGORIAS.DELETE(r))}static \u0275fac=function(i){return new(i||a)};static \u0275prov=ne({token:a,factory:a.\u0275fac,providedIn:"root"})};var st=()=>["/app/articulos"],mt=a=>({cat:a});function dt(a,r){if(a&1&&(e(0,"div",11)(1,"div",12)(2,"div",13),c(3,"img",14),t(),e(4,"div",15)(5,"span",16),o(6),t(),e(7,"h3",17),o(8),t(),e(9,"div",18)(10,"a",19),o(11," Ver productos "),e(12,"span"),o(13,"\u203A"),t()()()()()()),a&2){let i=r.$implicit;l(3),u("src",i.imagenUrl||"/images/placeholder-category.jpg",oe)("alt",i.nombre),l(3),g(" ",i.nombre," "),l(2),g(" ",i.descripcion," "),l(2),u("routerLink",Z(6,st))("queryParams",Ae(7,mt,i.nombre.toLowerCase()))}}function pt(a,r){a&1&&(e(0,"div",20),c(1,"i",21),e(2,"h3",22),o(3,"No hay categor\xEDas disponibles"),t(),e(4,"p",23),o(5,"Pronto a\xF1adiremos nuevas categor\xEDas de productos."),t()())}var be=class a{constructor(r){this.categoriasService=r}categorias=[];ngOnInit(){this.categoriasService.getCategorias().subscribe({next:r=>this.categorias=r,error:r=>console.error("Error al cargar categor\xEDas",r)})}static \u0275fac=function(i){return new(i||a)(K(_e))};static \u0275cmp=_({type:a,selectors:[["app-features-section"]],decls:16,vars:2,consts:[[1,"features","py-5","bg-white"],[1,"container"],[1,"text-center","mb-5"],[1,"display-5","fw-bold","mb-3"],[1,"lead","text-muted"],[1,"row","g-4"],["class","col-lg-4 col-md-6",4,"ngFor","ngForOf"],[1,"text-center","mt-5"],["href","/app/categorias",1,"btn","btn-outline-primary","btn-lg"],[1,"fas","fa-th-large","me-2"],["class","text-center py-5",4,"ngIf"],[1,"col-lg-4","col-md-6"],[1,"card","h-100","border-0","shadow-sm","category-card"],[1,"card-img-container"],["loading","lazy",1,"card-img-top","category-img",3,"src","alt"],[1,"card-body","d-flex","flex-column"],[1,"badge","bg-success","mb-3","align-self-start"],[1,"card-title","h5","fw-bold","mb-3"],[1,"card-actions","mt-auto"],[1,"btn","btn-primary","btn-sm",3,"routerLink","queryParams"],[1,"text-center","py-5"],[1,"fas","fa-box-open","fa-4x","text-muted","mb-3"],[1,"h4","text-muted"],[1,"text-muted"]],template:function(i,n){i&1&&(c(0,"app-navbar"),e(1,"section",0)(2,"div",1)(3,"div",2)(4,"h2",3),o(5,"Explora nuestras categor\xEDas"),t(),e(6,"p",4),o(7," Descubre productos frescos organizados por tipo "),t()(),e(8,"div",5),w(9,dt,14,9,"div",6),t(),e(10,"div",7)(11,"a",8),c(12,"i",9),o(13," Ver todas las categor\xEDas "),t()(),w(14,pt,6,0,"div",10),t()(),c(15,"app-footer")),i&2&&(l(9),u("ngForOf",n.categorias),l(5),u("ngIf",!n.categorias||n.categorias.length===0))},dependencies:[h,ie,G,v,O,x,P],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block}.features[_ngcontent-%COMP%]{background:#fff;padding:112px 0}.container[_ngcontent-%COMP%]{max-width:1280px;margin:0 auto;padding:0 24px}.category-card[_ngcontent-%COMP%]{transition:all .3s ease;cursor:pointer;border:none!important;box-shadow:0 4px 12px #0000001a!important}.category-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 12px 32px #0003!important}.card-img-container[_ngcontent-%COMP%]{overflow:hidden;background:#f8f9fa;border-top-left-radius:8px;border-top-right-radius:8px}.category-img[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover;transition:transform .3s ease}.category-card[_ngcontent-%COMP%]:hover   .category-img[_ngcontent-%COMP%]{transform:scale(1.1)}.card-body[_ngcontent-%COMP%]{padding:1.5rem}.badge[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;padding:.5rem 1rem;border-radius:20px}.card-title[_ngcontent-%COMP%]{color:#212529;font-weight:700;margin-bottom:1rem}.card-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{transition:all .3s ease;font-weight:600;display:inline-flex;align-items:center;gap:.5rem}.card-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.card-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.2rem;transition:transform .3s ease}.card-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{transform:translate(4px)}.btn-outline-primary[_ngcontent-%COMP%]{padding:.75rem 2rem;font-weight:600;border-width:2px;transition:all .3s ease}.btn-outline-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #0d6efd4d}.text-center[_ngcontent-%COMP%]   .fa-box-open[_ngcontent-%COMP%]{color:#6c757d}.text-muted[_ngcontent-%COMP%]{color:#6c757d!important}@media (max-width: 992px){.features[_ngcontent-%COMP%]{padding:80px 0}}@media (max-width: 768px){.features[_ngcontent-%COMP%]{padding:64px 0}.category-img[_ngcontent-%COMP%]{height:180px}.display-5[_ngcontent-%COMP%]{font-size:2rem}}@media (max-width: 576px){.features[_ngcontent-%COMP%]{padding:48px 0}.category-img[_ngcontent-%COMP%]{height:160px}.card-body[_ngcontent-%COMP%]{padding:1rem}}']})};var W=()=>{let a=s(M);return sessionStorage.getItem("authToken")?!0:(a.navigateByUrl("/auth"),!1)};var Q=a=>{let r=s(M),n=s($e).snapshot();if(!n)return r.navigateByUrl("/auth"),!1;let m=a.data.roles,p=a.data.tipoUsuario;if(p&&n.tipoUsuario!==p){let Y=n.tipoUsuario==="PRODUCTOR"?"/productor/dashboard":"/articulos";return r.navigateByUrl(Y),!1}let B=n.roles??[],te=!m||m.some(Y=>B.includes(Y));return te||r.navigate(["/error"],{queryParams:{code:403,m:"Sin permisos suficientes"}}),te};var Qe=[{path:"auth",component:me},{path:"cliente/login",component:de},{path:"cliente/registro",component:pe},{path:"productor/login",component:ue},{path:"productor/registro",component:ge},{path:"articulos",component:ee},{path:"categorias",component:be},{path:"categorias/:idCategoria",component:ee},{path:"productor/dashboard",canActivate:[W,Q],data:{tipoUsuario:"PRODUCTOR"},loadComponent:()=>import("./chunk-NIBRAOJN.js").then(a=>a.DashboardProductorComponent)},{path:"productor/perfil",canActivate:[W,Q],data:{tipoUsuario:"PRODUCTOR"},loadComponent:()=>import("./chunk-TB6EYXNY.js").then(a=>a.PerfilProductorComponent)},{path:"productor/categorias",canActivate:[W,Q],data:{tipoUsuario:"PRODUCTOR"},loadComponent:()=>import("./chunk-LVTGEKYU.js").then(a=>a.CategoriasProductorComponent)},{path:"productor/articulos",canActivate:[W,Q],data:{tipoUsuario:"PRODUCTOR"},loadComponent:()=>import("./chunk-PTG76X4B.js").then(a=>a.ArticulosProductorComponent)},{path:"productor/articulos/nuevo",canActivate:[W,Q],data:{tipoUsuario:"PRODUCTOR"},loadComponent:()=>import("./chunk-PTG76X4B.js").then(a=>a.ArticulosProductorComponent)},{path:"productor",redirectTo:"productor/dashboard",pathMatch:"full"},{path:"login",redirectTo:"auth",pathMatch:"full"},{path:"registro",redirectTo:"auth",pathMatch:"full"},{path:"login/productores",component:ce,data:{productor:!0}},{path:"error",component:se}];var Ke=(a,r)=>{let i=s(M),n=sessionStorage.getItem("authToken");console.log("\u{1F510} ==== TOKEN INTERCEPTOR DEBUG ===="),console.log("\u{1F510} Current sessionStorage contents:");for(let f=0;f<sessionStorage.length;f++){let Oe=sessionStorage.key(f),Ze=sessionStorage.getItem(Oe);console.log(`\u{1F510}   ${Oe}: ${Ze?.substring(0,50)}...`)}console.log('\u{1F510} Token from sessionStorage.getItem("authToken"):',n?n.substring(0,50)+"...":"NULL"),console.log("\u{1F510} =================================="),console.log("\u{1F510} Token interceptor - URL:",a.url),console.log("\u{1F510} Token interceptor - Method:",a.method),console.log("\u{1F510} Token interceptor - Token exists:",!!n),console.log("\u{1F510} Token interceptor - Token value:",n?n.substring(0,50)+"...":"null"),console.log("\u{1F510} Token interceptor - SessionStorage keys:",Object.keys(sessionStorage)),console.log("\u{1F510} Token interceptor - Full token from sessionStorage:",sessionStorage.getItem("authToken"));let m=["/cosechaencope/auth/","/swagger"],p=["/cosechaencope/articulos","/cosechaencope/categorias"],B=m.some(f=>a.url.includes(f)),te=a.method==="GET"&&p.some(f=>a.url===f||a.url.startsWith(f+"?")),Y=!B&&!te;console.log("\u{1F510} URL requires auth:",Y);let j=a;if(n&&Y){console.log("\u{1F510} Adding Authorization header: Bearer "+n.substring(0,20)+"...");let f={Authorization:`Bearer ${n}`};a.body instanceof FormData||(f["Content-Type"]="application/json"),j=a.clone({setHeaders:f}),console.log("\u{1F510} Request cloned with auth headers (FormData detected:",a.body instanceof FormData,")"),console.log("\u{1F510} Final cloned headers:",j.headers.keys()),console.log("\u{1F510} Authorization header value:",j.headers.get("Authorization"))}else Y&&!n?(console.warn("\u26A0\uFE0F Request requires auth but no token found!"),console.warn("\u26A0\uFE0F SessionStorage contents:",Object.keys(sessionStorage).map(f=>`${f}: ${sessionStorage.getItem(f)?.substring(0,30)}...`))):console.log("\u{1F510} Request does not require auth or no token needed");return console.log("\u{1F510} Final request headers:",Object.fromEntries(j.headers.keys().map(f=>[f,j.headers.get(f)]))),console.log("\u{1F510} About to send request with URL:",j.url),console.log("\u{1F510} Request method:",j.method),r(j).pipe(ye(f=>(console.error("\u274C Token interceptor - HTTP Error:",{status:f.status,statusText:f.statusText,url:a.url,method:a.method,headers:f.headers?.keys?.()||"No headers"}),f.status===401?(console.error("\u274C 401 Error - Token might be invalid or expired"),sessionStorage.removeItem("authToken"),i.navigateByUrl("/login")):f.status===403&&i.navigate(["/error"],{queryParams:{code:403,m:"Acceso denegado"}}),Me(()=>f))))};var Xe={providers:[He(Qe),ze(Le([Ke])),Ne({eventCoalescing:!0})]};var he=class a{title="cosecha-en-cope";static \u0275fac=function(i){return new(i||a)};static \u0275cmp=_({type:a,selectors:[["app-root"]],decls:1,vars:0,template:function(i,n){i&1&&c(0,"router-outlet")},dependencies:[qe],encapsulation:2})};De(he,Xe);
